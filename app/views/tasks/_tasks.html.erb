<% previous_month = nil %>
<% previous_day = nil %>

<% tasks.each do |task| %>
  
  <% if task.status != 'custom' %>
  <% if (task.start_on.day != previous_day)||(task.start_on.month != previous_month) %>
    <h4><%= task.start_on.strftime("%Y-%m-%d (%A)") %></h4>
  <% end %>
  
  <% if task.status != 'custom' %>
    <%= render 'tasks/task_card', task: task %>
    <% previous_month = task.start_on.month %>
    <% previous_day = task.start_on.day %>
  <% end %>
  <% end %>
  
<% end %>
  
